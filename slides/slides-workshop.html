<!DOCTYPE html>
<html>
  <head>
    <title>React Native</title>
    <meta charset="utf-8">
    <link href="node_modules/remark-bekk/dist/bekk.css" type="text/css" rel="stylesheet">
    <style>
      .small-img img{
        width: 275px;
      }
       .full-img img{
        width: 100%;
      }
    </style>
  </head>
  <body>
    <textarea id="source">

class: front-page

# React Native
## Workshop

Bekk Open Fagdag

15.04.2016

Anders Kristiansen

---

class: agenda

# Agenda

* Intro
* Syntaks og styling
* Redux
* Deploy
* Din tur!

---

# Intro

## Lansert for iOS i januar og for Android i september 2015 av Facebook
## Open Source
## Treg utviklingsyklus
## Treg deploymentsyklus
## Separate team for hver platform

???

## Av Facebook, aktivt brukt.
## Funket ikke å pakke inn webapps lengre. Webben er ikke klar enda.
## Synes det gikk for treigt å utvikle native. Treigere utviklingsmiljø. Utviklere må kunne flere språk og verktøy. Rett og slett ikke smidig nok ut ifra det de var vant til fra webben.
## Allerede stort community. PR, React komponenter
## Hyppige releases. Flere nye versjoner i løpet av de ukene vi jobbet med denne workshopen

---

# Intro 2 - Noe mer om kryssplatform?

## Ikke native look & feel
## Dårlig verktøystøtte og debug
## Begrenset sett med funksjonalitet

???

## 

---

# Hva er React Native?

## Bygger på React.js
## Samme prinsipper, med virtuell DOM
## Web-DOM er byttet ut med native komponenter
## _Learn_ once, write anywhere

???

## Moduler, virtuell DOM og deklarativt API. Vi beskriver hva programmet skal gjøre, ikke hvordan.
## Må ikke rendre til DOM. 
## Tydelig i nye versjoner av React.js, der React og ReactDOM splittes
## IKKE write once, der altså. Men det ligger til rette for gjenbruk. F.eks apier, events, business-logikk. Men ikke nødvendigvis view-kode.
## Skal være kjent for utviklere som kommer fra JS og React.
## Kan gjenbruke komponenter fra webben, og i tillegg får tilgang til platformkomponenter

---

# Ikke ulikt React.js

```html
<div>
  <span>Hei sveis</span>
  <button>Trykk på meg</button>
</div>
```

```html
<View>
  <Text>Hei sveis</Text>
  <TouchableHighlight>Trykk på meg</TouchableHighlight>
</View>
```

## Noen er platformspesifikke:
```html
<SwitchIOS />
<SwitchAndroid />
```

---

# Ikke HTML-webapp

## Fullt ut native plattformkomponenter
## JS kjører på JavaScriptCore
## Asynkront, utenfor UI-tråden. 
## JS til Native via "bridge".

???
## At det er basert på React.js betyr ikke at det er en React-app pakket inn i et WebView
## Ikke WebView, så det føles native. Deler av Facebook-appen er RN. Kan dere gjette hvilken? Events/arrangementer
## Sender kommandoer i batcher til UI-tråden.
## Flere tråder, i motsetning til web. Dekode bilder, lagre til disk, gjøre layoutberegninger utenfor UI-tråden. => Responsivt

---

# Bridge
.col[
.full-img[![](img/ReactBridge.png)]
]

---

# Styling - FLEXBOX

## Basert på Flexbox fra css
## flexDirection, flex, align-items, justify content
## "Inline styles"

```html
<Text style={{color: 'black'}}>
  Velkommen til Bekk Open Fagdag
</Text>
```

???

## En javascript-implementasjon av Flexbox

---
class: cols two

# FLEXBOX - direction

## flexDirection: column (default)
.col[
```javascript
class Flexbox extends Component {
  render() {
    return (
      <View style={{flex: 1, 
      flexDirection: 'column'}}>
        <View style={{flex: 1, 
        backgroundColor: '#252525'}}>
        </View>
        <View style={{flex: 1, 
        backgroundColor: '#e9555f'}}>
        </View>
        <View style={{flex: 1, 
        backgroundColor: '#36bdb2'}}>
        </View>
      </View>
    );
  }
}
```
]

.col[
.small-img[![](img/flex_column.png)]
]

???

## Hvilken akse skal barnenodene legges ut.

---
class: cols two

# FLEXBOX - direction

## flexDirection: row
.col[
```javascript
class Flexbox extends Component {
  render() {
    return (
      <View style={{flex: 1, 
      flexDirection: 'row'}}>
        <View style={{flex: 1, 
        backgroundColor: '#252525'}}>
        </View>
        <View style={{flex: 1, 
        backgroundColor: '#e9555f'}}>
        </View>
        <View style={{flex: 1, 
        backgroundColor: '#36bdb2'}}>
        </View>
      </View>
    );
  }
}
```
]

.col[
.small-img[![](img/flex_row.png)]
]

---

class: cols two

# FLEXBOX - justify content

## justifyContent: flex-start (default)
.col[
```html
      <View style={{flex: 1}}>
        <View style={{flex: 1, 
        justify-content='flex-start', 
        backgroundColor: '#e9555f', 
        paddingTop:50}}>
         <Text>Hei på dere</Text>
         <Text>Hei på dere</Text>
         <Text>Hei på dere</Text>
        </View>
      </View>
```
]

.col[
.small-img[![](img/justifyContent_flexStart.png)]
]

---

class: cols two

# FLEXBOX - justify content

## justifyContent: flex-end
.col[
```html
      <View style={{flex: 1}}>
        <View style={{flex: 1, 
        justify-content='center', 
        backgroundColor: '#e9555f', 
        paddingTop:50}}>
         <Text>Hei på dere</Text>
         <Text>Hei på dere</Text>
         <Text>Hei på dere</Text>
        </View>
      </View>
```
]

.col[
.small-img[![](img/justifyContent_center.png)]
]

---

class: cols two

# FLEXBOX - justify content

## justifyContent: flex-end
.col[
```html
      <View style={{flex: 1}}>
        <View style={{flex: 1, 
        justify-content='flex-end', 
        backgroundColor: '#e9555f', 
        paddingTop:50}}>
         <Text>Hei på dere</Text>
         <Text>Hei på dere</Text>
         <Text>Hei på dere</Text>
        </View>
      </View>
```
]

.col[
.small-img[![](img/justifyContent_flexEnd.png)]
]

---

class: cols two

# FLEXBOX - justify content

## justifyContent: space-around
.col[
```html
      <View style={{flex: 1}}>
        <View style={{flex: 1, 
        justify-content='space-around', 
        backgroundColor: '#e9555f', 
        paddingTop:50}}>
         <Text>Hei på dere</Text>
         <Text>Hei på dere</Text>
         <Text>Hei på dere</Text>
        </View>
      </View>
```
]

.col[
.small-img[![](img/justifyContent_spaceAround.png)]
]

---

class: cols two

# FLEXBOX - justify content

## justifyContent: space-between
.col[
```html
      <View style={{flex: 1}}>
        <View style={{flex: 1, 
        justify-content='space-between', 
        backgroundColor: '#e9555f', 
        paddingTop:50}}>
         <Text>Hei på dere</Text>
         <Text>Hei på dere</Text>
         <Text>Hei på dere</Text>
        </View>
      </View>
```
]

.col[
.small-img[![](img/justifyContent_spaceBetween.png)]
]

---

class: cols two

# FLEXBOX - flex

## flex: 1, flex: 1
.col[
```html
      <View style={{flex: 1}}>
        <View style={{flex: 1, 
        backgroundColor: '#e9555f'}}>
        </View>
         <View style={{flex: 1, 
         backgroundColor: '#36bdb2'}}>
        </View>
      </View>
```
]

.col[
.small-img[![](img/flex_1_1.png)]
]

---

class: cols two

# FLEXBOX - flex

## flex: 2, flex: 1
.col[
```html
      <View style={{flex: 1}}>
        <View style={{flex: 2, 
        backgroundColor: '#e9555f'}}>
        </View>
         <View style={{flex: 1, 
         backgroundColor: '#36bdb2'}}>
        </View>
      </View>
```
]

.col[
.small-img[![](img/flex_2_1.png)]
]

---

class: cols two

# Style-objekter

## Vanlig å trekke ut i style-objekter
.col[
```html
<View style={styles.row}>
  <Image
    source={
    {uri: 'http://inter.net/workshop.png'}}
    style={styles.image}
  />
  <View style={styles.text}>
    <Text style={styles.title}>
      Hei på dere!
    </Text>
    <Text style={styles.subtitle}>
      Velkommen til Bekk Open Fagdag
    </Text>
  </View>
</View>
```
]

.col[
```javascript
var styles = StyleSheet.create({
  row: { flexDirection: 'row', margin: 40 },
  image: { width: 40, height: 40, 
  marginRight: 10 },
  text: { flex: 1, justifyContent: 'center'},
  title: { fontSize: 11, fontWeight: 'bold' },
  subtitle: { fontSize: 10 },
});
```
]

---

# FLEXBOX

## Kan ha flere "klasser"
```html
<View style={[styles.base, styles.background]} />
```

## Og conditional klasser
```html
<View style={[styles.base, this.state.active && styles.active]} />
```

## Kan sende klasser rundt

???

## Exportere moduler, f.eks. base-styling


---

# State/Redux

## En enklere implementasjon av Flux
## Single store
## Actions - for å gjøre endringer på state
## Reducers - returnerer ny state basert på action 


???

## State container

---

# State/Redux - Single store

```javascript
import { createStore } from 'redux';
import { Provider } from 'react-redux';
import rnWorkshop from './reducers/reducers';
const store = createStore(rnWorkshop);

<Provider store={store}>
  <View>....</View>
</Provider>
```

???

# 

---

# State/Redux - Actions

## actions.js
```javascript
export const SET_USER_NAME = 'SET_USER_NAME';


export const setUsername = username => ({ type: SET_USER_NAME, username });
```
## someComponent.js
```javascript

import { setUsername } from '../actions/actions';

...
store.dispatch(setUsername("Mark Z."));
...

```

???

# 

---

# State/Redux - Reducers

## reducer.js
```javascript
function messageReducer(state = initialState, action) {
  switch (action.type) {
      case SET_USER_NAME:
      return Object.assign({}, state, { username: action.username });
  }
}
```

---

class: cols two

# Komponenter

.col[
## De vanligste komponentene og API-ene er tilgjengelige
## Men kan skrive egne komponenter i native kode og eksponere
## Mange finnes allerede som npm-moduler
]

.col[
.small-img[![](img/ReactComponents.png)]
]
???

## Clipboard, Orientation, 3D-touch ikke implementert enda

---

# Ikke fått til alt ...

## Navigator, NavigatorIOS, NavigatorExperimental, WTF?

???

## Navigator: Uklart API, og lite dokumenterte best practices
## NavigatorIOS: Begrenset API, og ikke supportert eller videreutviklet av Facebook
## NavigatorExperimental: Nytt. 

---

#Hva trenger man?

* XCode
* Android-SDK (Android Studio?)
* Node 4.x
* Det du skriver JS i

???

## Sublime, Atom etc

---

class: cols two

# Utviklingsmiljø!

.col[
## React Native kommer med Packager
## Oppdateringer med ⌘-R
## Debugging i Chrome
## Tydelige feilmeldinger
]

.col[
.small-img[![](img/ReactNative4.png)]
]

???

## Packager bygger appen, og står i bakgrunnen og venter på endringer.
## Noe av det mange sliter med er utviklingsmiljø. Mange som ikke Liker XCode
## Kan kjøre opp i Chromes V8 og bruke vanlig debugger
---

class: middle center

# KODE

---


# Remote deploy av JS?

## AppHub, CodePush
## I henhold til Apple guidelines

> ... The only exceptions to the
foregoing are scripts and code downloaded and run by Apple's built-in WebKit framework or
JavascriptCore, provided that such scripts and code do not change the primary purpose of the
Application ...
???

## Kjører på JSC, og guidelines understreker at det kan bli endret etter appen er releaset

---

# Linker

## https://facebook.github.io/react-native/docs/getting-started.html
## https://github.com/bekk/react-native-workshop


    </textarea>
    <script src="https://gnab.github.io/remark/downloads/remark-latest.min.js">
    </script>
    <script src="node_modules/remark-bekk/vendor/remark.min.js" type="text/javascript"></script>
    <script type="text/javascript">
      var slideshow = remark.create({
        ratio: '16:9',
        highlightStyle: 'monokai'
      });
    </script>
  </body>
</html>