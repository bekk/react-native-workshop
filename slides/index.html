<!DOCTYPE html>
<html>
  <head>
    <title>React Native</title>
    <meta charset="utf-8">
    <link href="remark-bekk/dist/bekk.css" type="text/css" rel="stylesheet">
    <style>
      .small-img img{
        width: 275px;
      }
       .full-img img{
        width: 100%;
      }
    </style>
  </head>
  <body>
    <textarea id="source">

class: front-page

# React Native
## Workshop

Mobile Meetup

23.08.2016

---

class: agenda

# Agenda

* Intro
* Syntax and styling
* Redux
* Navigation
* Instant deploy?
* You're next!

???

## Before I start. Who are familiar with React, RN, Redux?
## I will do this quick, so you get more time coding. But you are free to use these slides as reference during the coding as well

---

# Intro - Native

## Released for iOS January 2015 og for Android in september, by Facebook
## As of April 2016, also for Windows (UWP)
## Open Source
## Problems with (traditional) native
- Slow development cycle
- Slow deployment process
- Separate teams for each platform

???

## By Facebook, and used frequently.
## During this years F8-conference by Facebook Windows support was annouced. Can use RN-components in UWP-apps. Supported i, Visual Studio Code 
## Already a big community. Provides PR and creates React components.
## Frequent releases. Always several new versjon when between each time we work with this workshop.

## Didn't work to wrap webapps anymore. The web isn't ready for it, yet.
## Can do lots of cool things with native, but they thought that the development was to slow with native. The development environmen was slower. Could take a minute or more to recompile and deploy, and watch the changes in the app.
## Developers need to learn several languages, apis and tools. It was not as lean as they were using to from the web. And business logic had to be developed twice. For iOS and Android.

---

# Intro - Cross platform

## Problems with cross platform
- Bad performance
- Not (always) native look & feel
- The tooling and debuging are not as good as native development
- Limited functionlity

???

## Facebook has tried the most of it. And for a while the app was just a wrapped WebView. With poor performance.
## But the web has solved a lot of problems that are present in native and cross platform development, so they wanted to build on that

---

# What is React Native?

## Build on React.js
## Same principles, with virual DOM
## Web-DOM is replaced with native components
## _Learn_ once, write anywhere

???

## Modules, virtual DOM og declarative API. We describes what the program should render, not how.
## Doesn't have to renger to the DOM. 
## Apparent in new version of React.js. where React and ReactDOM is separated.
## NOT write once. But it is encouraging reuse. F.eks APIS, events, business-logic. But not necessarily view-code.
## Should be familiar to developes coming from JS and React.
## Can reuse components from the web, and in addition get access to platform components.
## So in many cases it is npm install, Så i mange tilfeller er det npm install, and you're good to go

---

# Much like React.js 1/2

```html
<div>
  <span>Hello world</span>
  <button>Click me!</button>
</div>
```

```html
<View>
  <Text>Hello world</Text>
  <TouchableOpacity>
    <Text>
      Click me!
    </Text>
  </TouchableOpacity>
</View>
```

???

## Button

---
# Much like React.js 2/2

```html
<input
  type="text"
  value={this.state.text}
  onChange={(text) => this.setState({text})}
/>
```

```html
 <TextInput
   value={this.state.text}
   onChangeText={(text) => this.setState({text})}
/>
```

## Noen er platformspesifikke:
```html
<SwitchIOS />
<SwitchAndroid />
```

???

## Input
## React-Native uses "Controlled Components", so there is a 'value' prop

---

class: cols two

# Components

.col[
## The most common components and APIs are available
## You can write your own modules in native code, and expose
## Many are already available as npm modules
]

.col[
.small-img[![](img/ReactComponents.png)]
]

???
## Orientation-change, 3D-touch are not officialy implemented, but are available as npm modules

---

# Not a web app!

## In a React-js app wrapped in a WebView
## Proper ut native platform components
## Optimizations
- JS runs on JavaScriptCore
- JS runs asyncronous, separated from the UI thread. 
- JS to Native via "bridge".

???
## That it is based on React.js does not mean that is is a React.JS app wrapped in a WebView
## As I said earlier, the DOM is interchgned.
## Not WebView, so it feels native. Parts of the Facebook app is actually RM. That os the Events/arrangementer part of the app.
## Sends batched commands to the UI thread.
## Multiple theads, as opposed to the web. Decode images, save to disc, do layout measurements can be done outside of the UI thead => Responsive app.
## The stated goal for Facebook has been 60 fps, for a snappy UI

---

# Bridge
.col[
.full-img[![](img/ReactBridge.png)]
]

???

## Receives an input, click.
## Gathers information, serialize it to JSON, and sends it to JSCore.
## JS processes events and creates a list of native commands.
## This is serialized and sent back to Native.
## Processes commands and updates UI

https://speakerdeck.com/frantic/react-native-under-the-hood

---
#What do you need?

* XCode
* Android-SDK
* Node 4.x
* npm 3
* react-native-cli
* Your favorite editor/IDE

???

## Sublime, Atom, Nuclide, IntelliJ etc

---

class: cols two

# Development environment!

.col[
## React Native ships with a Packager
## Updates with ⌘-R
## Debugging in Chrome. ⌘-D (iOS) / F2(Android)
## Descriptive and in-your-face error messages
]

.col[
.small-img[![](img/ReactNative4.png)]
]

???

## Packager builds the app, and is running in the backgroud waiting for changes.
## A common obstacle in native development is the environment. Many people are not comfortable with XCode.
## Can run in Chromes V8 (communicates with native via WebSockets) and use the normal Chrome debugger
## Of you are developing on a device, you can shake it to access developer options.
---

# Styling - Known from CSS

## "Inline styles"
## camelCasing
## margin, marginBottom, paddingBottom, borderRadius, width, height
## backgroundColor, borderColor, fontSize, fontWeight

```html
<Text style={{
  color: 'black', 
  fontSize: 20,
  fontWeight: 'bold',
  marginBottom: 10}}>
  Welcome to Mobile Meetup workshop
</Text>
```

???

## A javascript-implementation of CSS
## Most of the common CSS-props are implemented
## Inline styles with JS-objekter

---

# Styling - FLEXBOX

## Flexbox is used to lay out components
## Frames for UI elements
## Based on Flexbox from css
## flex direction, flex, align items, align self, justify content, ...


???

## A javascript-implementations of Flexbox. Based on CSS standards
## So you have containers who specifies child nodes, and you lay out in either columns or rows.
## I will demonstrate this quick noe, and the slides are more of a reference for you guys when implementing the tasks. And links to more documentation is provided along with the tasks.

---

class: cols two

# FLEXBOX - direction

## flexDirection: column (default)
.col[
```javascript
class Flexbox extends Component {
  render() {
    return (
      <View style={{flex: 1, 
      flexDirection: 'column'}}>
        <View style={{flex: 1, 
        backgroundColor: 'white'}}>
        </View>
        <View style={{flex: 1, 
        backgroundColor: '#e9555f'}}>
        </View>
        <View style={{flex: 1, 
        backgroundColor: '#36bdb2'}}>
        </View>
      </View>
    );
  }
}
```
]

.col[
.small-img[![](img/flex_column.png)]
]

???

## Along which axis the child nodes are laid out
## Column: top to bottom

---
class: cols two

# FLEXBOX - direction

## flexDirection: row
.col[
```javascript
class Flexbox extends Component {
  render() {
    return (
      <View style={{flex: 1, 
      flexDirection: 'row'}}>
        <View style={{flex: 1, 
        backgroundColor: 'white'}}>
        </View>
        <View style={{flex: 1, 
        backgroundColor: '#e9555f'}}>
        </View>
        <View style={{flex: 1, 
        backgroundColor: '#36bdb2'}}>
        </View>
      </View>
    );
  }
}
```
]

.col[
.small-img[![](img/flex_row.png)]
]

???

## Left to right in a row

---
class: cols two

# FLEXBOX - justify content

## justifyContent: flex-start (default)
.col[
```html
      <View style={{flex: 1, 
        justifyContent='flex-start', 
        backgroundColor: '#e9555f', 
        paddingTop:50}}>
         <Text style={{
          backgroundColor: '#36bdb2', 
          padding:10}}>Hello world!</Text>
         <Text style={{
          backgroundColor: '#36bdb2', 
          padding:10}}>Hello world!</Text>
         <Text style={{
          backgroundColor: '#36bdb2', 
          padding:10}}>Hello world!</Text>
      </View>
```
]

.col[
.small-img[![](img/justifyContent_flexStart.png)]
]

???

## This defines the alignment along the main axis
## How elements are laid out inside of the container
## This refers to the child elements

---

class: cols two

# FLEXBOX - justify content

## justifyContent: center
.col[
```html
      <View style={{flex: 1, 
        justifyContent='center', 
        backgroundColor: '#e9555f', 
        paddingTop:50}}>
         <Text style={{
          backgroundColor: '#36bdb2', 
          padding:10}}>Hello world!</Text>
         <Text style={{
          backgroundColor: '#36bdb2', 
          padding:10}}>Hello world!</Text>
         <Text style={{
          backgroundColor: '#36bdb2', 
          padding:10}}>Hello world!</Text>
      </View>
```
]

.col[
.small-img[![](img/justifyContent_center.png)]
]

---

class: cols two

# FLEXBOX - justify content

## justifyContent: flex-end
.col[
```html
      <View style={{flex: 1, 
        justifyContent='flex-end', 
        backgroundColor: '#e9555f', 
        paddingTop:50}}>
         <Text style={{
          backgroundColor: '#36bdb2', 
          padding:10}}>Hello world!</Text>
         <Text style={{
          backgroundColor: '#36bdb2', 
          padding:10}}>Hello world!</Text>
         <Text style={{
          backgroundColor: '#36bdb2', 
          padding:10}}>Hello world!</Text>
      </View>
```
]

.col[
.small-img[![](img/justifyContent_flexEnd.png)]
]

---

class: cols two

# FLEXBOX - justify content

## justifyContent: space-around
.col[
```html
      <View style={{flex: 1, 
        justifyContent='space-around', 
        backgroundColor: '#e9555f', 
        paddingTop:50}}>
         <Text style={{
          backgroundColor: '#36bdb2', 
          padding:10}}>Hello world!</Text>
         <Text style={{
          backgroundColor: '#36bdb2', 
          padding:10}}>Hello world!</Text>
         <Text style={{
          backgroundColor: '#36bdb2', 
          padding:10}}>Hello world!</Text>
      </View>
```
]

.col[
.small-img[![](img/justifyContent_spaceAround.png)]
]

---

class: cols two

# FLEXBOX - justify content

## justifyContent: space-between
.col[
```html
      <View style={{flex: 1, 
        justifyContent='space-between', 
        backgroundColor: '#e9555f', 
        paddingTop:50}}>
         <Text style={{
          backgroundColor: '#36bdb2', 
          padding:10}}>Hello world!</Text>
         <Text style={{
          backgroundColor: '#36bdb2', 
          padding:10}}>Hello world!</Text>
         <Text style={{
          backgroundColor: '#36bdb2', 
          padding:10}}>Hello world!</Text>
      </View>
```
]

.col[
.small-img[![](img/justifyContent_spaceBetween.png)]
]

---


class: cols two

# FLEXBOX - align items

## align-items: stretch (default)
.col[
```html
      <View style={{flex: 1, 
        alignItems:'stretch', 
        backgroundColor: '#e9555f', 
        paddingTop:50}}>
         <Text style={{
          backgroundColor: '#36bdb2', 
          padding:10}}>Hello world!</Text>
         <Text style={{
          backgroundColor: '#36bdb2', 
          padding:10}}>Hello world!</Text>
         <Text style={{
          backgroundColor: '#36bdb2', 
          padding:10}}>Hello world!</Text>
      </View>
```
]

.col[
.small-img[![](img/alignItems_stretch.png)]
]

???
## This defines the alignment across the main axis
## Also for child nodes. Equivalent for elements is alignSelf

---

class: cols two

# FLEXBOX - align items

## align-items: flex-start
.col[
```html
      <View style={{flex: 1, 
        alignItems:'flex-start', 
        backgroundColor: '#e9555f', 
        paddingTop:50}}>
         <Text style={{
          backgroundColor: '#36bdb2', 
          padding:10}}>Hello world!</Text>
         <Text style={{
          backgroundColor: '#36bdb2', 
          padding:10}}>Hello world!</Text>
         <Text style={{
          backgroundColor: '#36bdb2', 
          padding:10}}>Hello world!</Text>
      </View>
```
]

.col[
.small-img[![](img/alignItems_flexStart.png)]
]

---


class: cols two

# FLEXBOX - align items

## align-items: flex-end
.col[
```html
      <View style={{flex: 1, 
        alignItems:'flex-end', 
        backgroundColor: '#e9555f', 
        paddingTop:50}}>
         <Text style={{
          backgroundColor: '#36bdb2', 
          padding:10}}>Hello world!</Text>
         <Text style={{
          backgroundColor: '#36bdb2', 
          padding:10}}>Hello world!</Text>
         <Text style={{
          backgroundColor: '#36bdb2', 
          padding:10}}>Hello world!</Text>
      </View>
```
]

.col[
.small-img[![](img/alignItems_flexEnd.png)]
]

---


class: cols two

# FLEXBOX - align items

## align-items: center
.col[
```html
      <View style={{flex: 1, 
        alignItems:'center', 
        backgroundColor: '#e9555f', 
        paddingTop:50}}>
         <Text style={{
          backgroundColor: '#36bdb2', 
          padding:10}}>Hello world!</Text>
         <Text style={{
          backgroundColor: '#36bdb2', 
          padding:10}}>Hello world!</Text>
         <Text style={{
          backgroundColor: '#36bdb2', 
          padding:10}}>Hello world!</Text>
      </View>
```
]

.col[
.small-img[![](img/alignItems_center.png)]
]

---


class: cols two

# FLEXBOX - flex

## flex: 1, flex: 1
.col[
```html
      <View style={{flex: 1}}>
        <View style={{flex: 1, 
        backgroundColor: '#e9555f'}}>
        </View>
         <View style={{flex: 1, 
         backgroundColor: '#36bdb2'}}>
        </View>
      </View>
```
]

.col[
.small-img[![](img/flex_1_1.png)]
]


???

## How much space should the element get?
## If all have the same value, the get the same amount of space
## 0 => As much space as the element needs
## >0 As much space as possible


---

class: cols two

# FLEXBOX - flex

## flex: 2, flex: 1
.col[
```html
      <View style={{flex: 1}}>
        <View style={{flex: 2, 
        backgroundColor: '#e9555f'}}>
        </View>
         <View style={{flex: 1, 
         backgroundColor: '#36bdb2'}}>
        </View>
      </View>
```
]

.col[
.small-img[![](img/flex_2_1.png)]
]

---

class: cols two

# Style-objekter

## Common to extract into style objects
.col[
```html
<View style={styles.row}>
  <Image
    source={
    {uri: 'http://inter.net/workshop.png'}}
    style={styles.image}
  />
  <View style={styles.text}>
    <Text style={styles.title}>
      Hello world!!
    </Text>
    <Text style={styles.subtitle}>
      Welcome to Mobile Meetup workshop
    </Text>
  </View>
</View>
```
]

.col[
```javascript
var styles = StyleSheet.create({
  row: { flexDirection: 'row', margin: 40 },
  image: { width: 40, height: 40, 
  marginRight: 10 },
  text: { flex: 1, justifyContent: 'center'},
  title: { fontSize: 11, fontWeight: 'bold' },
  subtitle: { fontSize: 10 },
});
```
]

---

# FLEXBOX

## Can have multiple "classes"
```html
<View style={[styles.base, styles.background]} />
```

## And conditional classes
```html
<View style={[styles.base, this.state.active && styles.active]} />
```

???

## Export moduler, f.eks. base-styling

---


# State/Redux

## A simplified implementation of Flux
## Single store
## Actions - describes the change of state
## Reducers - returns new state based on action


???

## State container. Noe av det fine med RN. At man kan bruke eksisterende moduler og konsepter
## 3 prinsipper
## Single source of truth - One single store
## State is read-only - The only way to change the state is to emit an action, an object describing what happened.
## Changes are made with pure functions - To specify how the state tree is transformed by actions, you write pure reducers.

---

# State/Redux - Single store

## app.js

```javascript
import { createStore } from 'redux';
import { Provider } from 'react-redux';
import rnWorkshop from './reducers/reducers';
const store = createStore(rnWorkshop);

<Provider store={store}>
  <View>....</View>
</Provider>
```

???

# Views listens to the state

---

# State/Redux - Actions

## actions.js
```javascript
export const setUsername = username => ({ type: SET_USER_NAME, username });
```
## someComponent.js
```javascript

import { setUsername } from '../actions/actions';

...
store.dispatch(setUsername("Mark Z."));
...

```

???

## What did happen?
 

---

# State/Redux - Reducers

## reducer.js
```javascript
function messageReducer(state = initialState, action) {
  switch (action.type) {
      case SET_USER_NAME:
      return Object.assign({}, state, { username: action.username });
  }
}
```

???

## Reducer is a mapping between action and state. Returns next state
## Do not mutate state. Return new state.


---

# They haven't nailed everything ...

## Navigator, NavigatorIOS, NavigatorExperimental, WTF?

???

## Navigator: Unclear API, and not documented best practices. (NavigationBar in one example)
- Not as smooth animations
## NavigatorIOS: Limited API, and not supported og developed by Facebook
## NavigatorExperimental: New. 

---


# How to use Navigator

## Important functions:
`initialRoute` - starting point for Navigator

`renderScene` - describe how a scene is to be rendered based on active route

`push(route)` - navigate to a new page/component

???

## Route object that identifies a page

---

# How to use Navigator

## We have wrapped Navigaton to abstract parts of the functionality and difficulties using it

## Init (app.js):
```
import Navigator from './components/navigation/navigator';

<Navigator ref="navigator" />
```

## Use:
```
import { navigateTo } from '../actions/actions';
import NewMessage from '../new-message';

dispatch(navigateTo({component: NewMessage, title: 'Compose message'});
```

???

## Uses Navigator, but have abstracted setup of Navigator and NavigationBar
## Important functins, transitions + config for look and feel (animations, navigation bar layout)
## Use: Navigator is in Redux State, so send a component into the navigateTo action.
## Uses Babel, so ES6/7 can be used

---

# Instant deploy of JS?

## AppHub, CodePush (MS)
## According to the Apple guidelines

> ... The only exceptions to the
foregoing are scripts and code downloaded and run by Apple's built-in WebKit framework or
JavascriptCore, provided that such scripts and code do not change the primary purpose of the
Application ...

.small-img[![](img/AppHub3.png)]

???

## I said something about slow deployment process in the intro.
## Runs on JSC, so according to guidelines the app can be changed after release.
## If it is only JS changes, these can be pushed outside App Store. I can also be release to a subset of users for testing.

---

class: middle center

# YOU ARE NEXT!

---

# Links

## https://facebook.github.io/react-native/docs/getting-started.html
## https://github.com/bekk/react-native-workshop


    </textarea>
    <script src="https://gnab.github.io/remark/downloads/remark-latest.min.js">
    </script>
    <script src="node_modules/remark-bekk/vendor/remark.min.js" type="text/javascript"></script>
    <script type="text/javascript">
      var slideshow = remark.create({
        ratio: '16:9',
        highlightStyle: 'monokai'
      });
    </script>
  </body>
</html>